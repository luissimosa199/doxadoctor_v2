"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[945],{2345:function(e,t,a){var l=a(5893),s=a(2489),r=a(3024),i=a(7294),n=a(9417);t.Z=e=>{let{url:t,title:a}=e,[o,c]=(0,i.useState)(!1),m=encodeURIComponent(t),u=encodeURIComponent(a),d=[{platform:"WhatsApp",url:"https://wa.me/?text=".concat(m+"?utm_source=w","%20").concat(u),icon:r.VHX,color:"#25D366"},{platform:"Facebook",url:"https://www.facebook.com/sharer/sharer.php?u=".concat(m+"?utm_source=f"),icon:r.neY,color:"#3b5998"},{platform:"Twitter",url:"https://twitter.com/share?url=".concat(m+"?utm_source=tw","&text=").concat(u),icon:r.mdU,color:"#1DA1F2"},{platform:"LinkedIn",url:"https://www.linkedin.com/sharing/share-offsite/?url=".concat(m+"?utm_source=l"),icon:r.D9H,color:"#0077b5"},{platform:"Pinterest",url:"https://pinterest.com/pin/create/button/?url=".concat(m+"?utm_source=p","&media=&description=").concat(u),icon:r.Xs4,color:"#BD081C"},{platform:"Reddit",url:"https://reddit.com/submit?url=".concat(m+"?utm_source=r","&title=").concat(u),icon:r.HK3,color:"#FF5700"},{platform:"Telegram",url:"https://telegram.me/share/url?url=".concat(m+"?utm_source=t","&text=").concat(u),icon:r.Uv8,color:"#0088cc"},{platform:"Email",url:"mailto:?subject=".concat(u,"&body=").concat(m+"?utm_source=e"),icon:r.Uv8,color:"#D44638"}];return(0,l.jsxs)("ul",{className:"flex gap-2 px-2 justify-center",children:[d.map((e,t)=>(0,l.jsx)("li",{className:"w-5 h-5",children:(0,l.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:(0,l.jsx)(s.G,{icon:e.icon,style:{color:e.color}})})},t)),(0,l.jsxs)("div",{children:[(0,l.jsx)("button",{type:"button",className:"w-5",onClick:()=>{navigator.clipboard.writeText(t+"?utm_source=cp"),c(!0),setTimeout(()=>{c(!1)},1e3)},children:(0,l.jsx)(s.G,{icon:n.kZ_,className:"text-slate-500"})}),o&&(0,l.jsx)("span",{className:"ml-2 text-xs",children:"Copiado!"})]})]})}},6945:function(e,t,a){a.d(t,{Z:function(){return L}});var l=a(5893),s=a(8375),r=e=>{let{data:t,idx:a,length:r}=e,i=t.url.includes("/dahu3rii0/video/upload/")&&t.url.endsWith(".mp4")||t.url.includes("data:video/mp4");return(0,l.jsxs)("div",{className:"mt-4 w-fit mx-auto bg-white",children:[(0,l.jsx)("div",{className:"w-full",children:i?(0,l.jsxs)("video",{controls:!0,width:"850",height:"850",className:"rounded mx-auto",children:[(0,l.jsx)("source",{src:t.url,type:"video/mp4"}),"Your browser does not support the video tag."]}):(0,l.jsx)(s.bz,{className:"rounded mx-auto",src:t.url,alt:t.caption||"image",width:850,height:850,priority:0===a})}),(0,l.jsx)("p",{className:"text-lg text-gray-500 mt-2 ml-2",children:t.caption})]})},i=a(9008),n=a.n(i),o=a(2345),c=e=>{let{timeline:t,timelineName:a,timeLineUrl:s,message:r,siteName:i}=e;return(0,l.jsxs)(l.Fragment,{children:[t&&(null==t?void 0:t.length)>0&&(0,l.jsx)("meta",{property:"og:image",itemProp:"image",content:t[0].url}),t&&(null==t?void 0:t.length)>0&&(0,l.jsx)("meta",{name:"twitter:image",content:t[0].url}),(0,l.jsx)("meta",{property:"og:url",content:"".concat(s)}),(0,l.jsx)("meta",{property:"og:title",content:"".concat(a)}),(0,l.jsx)("meta",{name:"twitter:title",content:"".concat(a)}),(0,l.jsx)("meta",{property:"og:description",content:"".concat(r)}),(0,l.jsx)("meta",{name:"twitter:description",content:"".concat(r)}),(0,l.jsx)("meta",{property:"og:type",content:"website"}),(0,l.jsx)("meta",{property:"og:image:type",content:"image/jpeg"}),(0,l.jsx)("meta",{property:"og:site_name",content:i})]})},m=a(2489),u=a(9417),d=a(1664),x=a.n(d),h=a(3299),p=a(6455),g=a.n(p),f=a(5945),j=a(7294),v=e=>{let{src:t,w:a="100%",h:s="100%",title:r="iframe",...i}=e,[n,o]=(0,j.useState)(!1);return(0,j.useEffect)(()=>{o(!0)},[]),(0,l.jsx)(l.Fragment,{children:n&&(0,l.jsx)("iframe",{src:t,width:a,height:s,title:r,...i})})},w=a(455),b=e=>{let{videoId:t,h:a="800px",start:s}=e;return(0,l.jsx)("iframe",{width:"100%",height:a,src:"https://www.youtube.com/embed/".concat(t).concat(s?"?start="+s:""),title:"YouTube video player ".concat(t+s),allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})},y=e=>{let{tags:t}=e;return(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)("div",{className:"flex mt-1",children:(0,l.jsx)("ul",{className:"w-full mx-auto flex gap-2 flex-wrap lg:w-1/2",children:t&&t.length>0?t.map((e,t)=>(0,l.jsx)("li",{className:"flex items-center text-xs font-medium tracking-wider text-left uppercase px-2 transition-all text-gray-500 mb-1",children:(0,l.jsx)("span",{children:e})},"".concat(e).concat(t))):(0,l.jsx)("li",{children:(0,l.jsx)("p",{className:"text-gray-400 text-xs font-medium tracking-wider text-left uppercase py-0.5 px-1",children:"No has agregado categor\xedas a tu perfil"})})})})})},N=e=>{let{name:t,tags:a,bio:s}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-2 items-start mb-6 p-2",children:[(0,l.jsxs)("h2",{className:"text-2xl font-semibold text-white",children:["Sobre ",t]}),(0,l.jsxs)("div",{className:"flex gap-2 w-full mt-1",children:[(0,l.jsxs)("h3",{className:"text-white text-sm break-normal min-h-[450px]:text-base",children:["Categor\xedas:"," "]}),(0,l.jsx)(y,{tags:a})]}),(0,l.jsx)("p",{className:"text-lg text-gray-300",children:s})]})},k=a(4417),E=e=>{var t;let{username:a,isLoading:s,isFavorite:r,mutation:i}=e,{data:n}=(0,h.useSession)(),o=[{icon:u.vto,href:"".concat((null==n?void 0:n.user)?"/chat/".concat((null==n?void 0:null===(t=n.user)||void 0===t?void 0:t.email).split("@")[0],"y").concat(a):"/login"),name:"Enviar mensaje",color:"bg-violet-400"},{icon:u.iGN,href:"".concat((null==n?void 0:n.user)?"/videocall?name=".concat(a):"/login"),name:"Videollamada",color:"bg-emerald-400"},{icon:u.egO,href:"/premium",name:"Contenido Premium",color:"bg-emerald-400"}];return(0,l.jsxs)("ul",{className:"flex justify-around my-4 lg:my-0 lg:gap-2",children:[(0,l.jsx)("li",{className:"w-28 h-20 lg:h-fit lg:w-fit lg:rounded-lg lg:px-4 text-gray-300 lg:bg-[#3a3a3a] active:hover:opacity-70 lg:hover:opacity-70",children:(0,l.jsx)("div",{className:"flex flex-col lg:flex-row lg:gap-2 justify-center items-center",children:(0,l.jsx)(k.Z,{isFavorite:r,mutation:i,isLoading:s,size:"2x",username:a,showSpan:!0},"1")})}),o.map((e,t)=>(0,l.jsx)("li",{className:"w-28 h-20 lg:h-fit lg:w-fit lg:rounded-lg lg:px-4 text-gray-300 lg:bg-[#3a3a3a] active:hover:opacity-70 lg:hover:opacity-70",children:(0,l.jsxs)(x(),{className:"flex flex-col lg:flex-row lg:gap-2 justify-center items-center lg:py-1",href:e.href,children:[(0,l.jsx)(m.G,{size:"2x",icon:e.icon,className:"w-10 h-10 lg:w-5 lg:h-5"}),(0,l.jsx)("span",{className:"text-sm break-normal min-h-[450px]:text-base",children:e.name})]})},t))]})},T=a(9059),_=e=>{let{image:t,name:a}=e,[r,i]=(0,j.useState)(!1);return(0,l.jsx)("div",{className:"",children:(0,l.jsx)("div",{className:"pb-2 md:p-4 flex flex-col items-end bg-white md:flex-row",children:(0,l.jsx)("div",{onClick:()=>{i(!r)},className:"relative mx-auto md:mx-0",children:(0,l.jsx)("div",{className:"w-screen md:w-96 h-[400px] md:h-96 bg-gray-300 mb-2 overflow-hidden z-0",children:(0,l.jsx)(s.bz,{src:t||T.j,fill:!0,alt:"".concat(a,"'s Avatar"),className:"object-cover object-center"})})})})})},D=a(163),C=e=>{let{userData:t}=e,{isFavorite:a,mutation:s,isLoading:r}=(0,D.s)(null==t?void 0:t.email);return(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row justify-around items-center lg:items-start bg-[#1a1a1a] py-4",children:[(0,l.jsx)(_,{image:null==t?void 0:t.image,name:null==t?void 0:t.name}),(0,l.jsxs)("div",{className:"text-center lg:text-left lg:flex lg:self-end lg:items-end lg:justify-between lg:ml-12 w-full",children:[(0,l.jsx)("div",{children:(0,l.jsx)("p",{className:"font-semibold text-2xl my-3 text-white break-normal",children:(0,l.jsx)(x(),{href:"/usuarios/".concat(null==t?void 0:t.slug),children:null==t?void 0:t.name})})}),(0,l.jsxs)("div",{className:"mx-auto lg:mx-0 flex flex-col justify-center lg:self-end w-full lg:max-w-lg",children:[(0,l.jsx)("div",{className:"lg:hidden",children:(0,l.jsx)(E,{isFavorite:a,mutation:s,isLoading:r,username:null==t?void 0:t.email},"1")}),(0,l.jsx)("div",{className:"lg:hidden",children:(0,l.jsx)(N,{name:null==t?void 0:t.name,tags:null==t?void 0:t.tags,bio:null==t?void 0:t.bio})})]})]})]})},S=a(6492),z=e=>{let{username:t}=e,{data:a,isLoading:s}=(0,S.a)(["timelineAuthorData",t],async()=>{let e=await fetch("/api/user?username=".concat(t));return e.json()}),{isFavorite:r,mutation:i,isLoading:n}=(0,D.s)(t);return s?(0,l.jsx)("div",{className:"h-40 bg-gray-300 animate-pulse"}):(console.log({isFavorite:r,FavLoading:n}),(0,l.jsxs)("div",{children:[(0,l.jsx)(C,{userData:a[0]}),(0,l.jsx)("div",{className:"hidden lg:block lg:mt-4",children:(0,l.jsx)(E,{isFavorite:r,mutation:i,isLoading:n,username:null==a?void 0:a.email},"3")})]}))},L=e=>{var t;let{timeline:a,length:s,mainText:i,createdAt:d,tags:p,_id:j,authorId:y,authorName:N,links:k,urlSlug:E}=e,{data:T}=(0,h.useSession)(),_=(0,f.NL)(),D=async e=>{e.preventDefault();try{let e=await g().fire({title:"Estas seguro?",text:"Esta publicaci\xf3n no podr\xe1 ser recuperada una vez confirmes",icon:"warning",showCancelButton:!0,confirmButtonText:"Borrar",cancelButtonText:"Volver",reverseButtons:!0});if(e.isConfirmed){let e=await fetch("/api/timeline/".concat(j),{method:"DELETE"});e.ok?(await e.json(),_.invalidateQueries(["timelines"]),g().fire({title:"Publicaci\xf3n borrada",icon:"success"})):g().fire({title:"Error: ".concat(e.status," ").concat(e.statusText),icon:"error"})}}catch(e){console.error("Error: ",e),g().fire({title:"Error: ".concat(JSON.stringify(e)),icon:"error"})}},C="http://localhost:3000"+"/nota/".concat(E||j);return(0,l.jsxs)("div",{className:"mb-4 max-w-[850px] lg:max-w-[1024px] mx-auto break-all flex flex-col lg:flex-row lg:gap-4",children:[(0,l.jsx)(n(),{children:(0,l.jsx)(c,{timeline:a,timelineName:(null==i?void 0:i.slice(0,50))||"",timeLineUrl:C,message:"Comparte con Doxa-Board",siteName:"doxa-board"})}),(0,l.jsxs)("div",{className:"py-4",children:[(0,l.jsx)("div",{className:""}),(0,l.jsxs)("div",{className:"px-4",children:[(0,l.jsx)("div",{className:"text-left",children:i&&i.split("\n").map((e,t)=>(0,l.jsx)("p",{className:"".concat(i.length>300?"text-md font-normal":"text-xl font-semibold"," mb-2 break-words "),children:e},t))}),(0,l.jsx)("p",{className:"text-sm text-white mt-2",children:p.join(", ")}),(0,l.jsx)("p",{className:"text-sm text-gray-300",children:function(e){let t=new Date(e);return t.toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"UTC"})}(d)}),(0,l.jsx)("p",{className:"text-sm text-gray-300 capitalize",children:"defaultName"===N?"":N}),(0,l.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,l.jsx)("div",{children:"newitem"!==j&&(0,l.jsx)(o.Z,{url:C,title:"".concat(null==i?void 0:i.slice(0,50))})}),(0,l.jsx)("div",{className:"w-fit flex gap-2",children:"newitem"!==j&&(null==T?void 0:null===(t=T.user)||void 0===t?void 0:t.email)===y&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x(),{className:"text-blue-500 w-6 h-6 hover:text-blue-700 transition ease-in-out duration-150",href:"/nota/editar/".concat(j),children:(0,l.jsx)(m.G,{icon:u.Yai,size:"lg"})}),(0,l.jsx)("button",{className:"w-5 h-5",onClick:D,children:(0,l.jsx)(m.G,{icon:u.Vui,size:"lg",className:"text-red-500 hover:text-red-700 transition ease-in-out duration-150"})})]})})]})]}),(0,l.jsxs)("div",{className:"mt-6 ",children:[a&&a.map(e=>(0,l.jsx)(r,{idx:e.idx,data:e,length:s},e.idx)),k&&k.map((e,t)=>{let a,s;if("object"==typeof e&&e.value)a=e.value,s=e.caption;else{if("string"!=typeof e)return null;a=e,s=void 0}if((0,w.T)(a)&&(0,w.Tm)(a)){let e=(0,w.Lm)(a);return(0,l.jsx)("div",{className:"mt-4 max-w-[800px] w-full mx-auto bg-white",children:(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)(b,{videoId:(0,w.Tm)(a),h:"500px",start:e}),s&&(0,l.jsx)("p",{className:"text-lg text-gray-500 mt-2 ml-2",children:s})]})},a+j)}return(0,l.jsx)("div",{className:"mt-4 max-w-[800px] w-full mx-auto bg-white",children:(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)(v,{src:a,h:"800px"}),s&&(0,l.jsx)("p",{className:"text-lg text-gray-500 mt-2 ml-2",children:s})]})},a+j)})]})]}),(0,l.jsxs)("div",{className:"w-full lg:w-1/5",children:[(0,l.jsx)("div",{className:"lg:hidden",children:(0,l.jsx)(z,{username:y})}),(0,l.jsx)("div",{className:"hidden lg:block lg:border lg:w-full lg:h-screen lg:mt-32"})]})]})}},4417:function(e,t,a){var l=a(5893),s=a(9417),r=a(4288),i=a(2489),n=a(3299),o=a(1163);a(7294),t.Z=e=>{let{username:t,size:a="lg",showSpan:c=!1,isFavorite:m,mutation:u,isLoading:d}=e,{data:x}=(0,n.useSession)(),h=(0,o.useRouter)();return(0,l.jsxs)("div",{className:"".concat(c?"flex flex-col lg:flex-row items-center justify-center gap-1":""," cursor-pointer"),onClick:e=>{if(e.preventDefault(),!(null==x?void 0:x.user)){h.push("/login");return}u.mutate({email:t,method:m?"DELETE":"POST"})},children:[(0,l.jsx)("button",{className:"".concat(d?"text-white animate-pulse":m?"text-yellow-500 sm:hover:text-white":"text-black active:text-yellow-500 sm:hover:text-yellow-500","  flex justify-center items-center lg:py-1"),children:(0,l.jsx)(i.G,{size:a,icon:m?s.Tab:r.Tab,className:"w-10 h-10 lg:w-5 lg:h-5"})}),c&&(0,l.jsxs)("span",{className:"text-sm break-normal min-h-[450px]:text-base",children:[m?"Eliminar de ":"Agregar a ","favoritos"]})]})}},163:function(e,t,a){a.d(t,{s:function(){return o}});let l=async e=>{let{email:t,method:a}=e,l=await fetch("".concat("http://localhost:3000","/api/user/favorites"),{method:a,body:t});if(!l.ok)throw Error("Network response was not ok");return l.json()};var s=a(6492),r=a(5945),i=a(8228),n=a(7294);function o(e){let[t,a]=(0,n.useState)(null),{data:o,isLoading:c}=(0,s.a)(["favorites",e],async()=>{let e=await fetch("".concat("http://localhost:3000","/api/user/favorites"));if(e.ok){let t=await e.json();return t}}),m=(0,r.NL)(),u=(0,i.D)(l,{onMutate:t=>{let{email:l,method:s}=t;m.cancelQueries(["favorites",e]);let r=m.getQueryData(["favorites",e])||[];return Array.isArray(r)&&("DELETE"===s?(m.setQueryData(["favorites",e],r.filter(e=>e!==l)),a(!1)):(m.setQueryData(["favorites",e],[...r,l]),a(!0))),{previousFavorites:r}},onSettled:()=>{m.invalidateQueries(["favorites",e])}});return(0,n.useEffect)(()=>{o&&a(o.includes(e))},[o,e]),{isFavorite:t,mutation:u,isLoading:c}}},455:function(e,t,a){function l(e){return/^(https?:\/\/)?(www\.)?(youtube\.com\/watch\?.*v=|youtu\.be\/|youtube\.com\/embed\/)[a-zA-Z0-9_-]{11}(?:&.*|\?.*)?$/.test(e)}function s(e){for(let t of[/^https?:\/\/youtu\.be\/([a-zA-Z0-9_-]{11})(?:\?.*)?$/,/^https?:\/\/www\.youtube\.com\/watch\?.*v=([a-zA-Z0-9_-]{11})(?:&.*|$)/,/^https?:\/\/www\.youtube\.com\/embed\/([a-zA-Z0-9_-]{11})(?:\?.*)?$/]){let a=e.match(t);if(a)return a[1]}return null}function r(e){let t=e.match(/[?&]t=(\d+)/);return t?parseInt(t[1],10):null}a.d(t,{Lm:function(){return r},T:function(){return l},Tm:function(){return s}})},9059:function(e,t,a){a.d(t,{j:function(){return l}});let l="https://res.cloudinary.com/dahu3rii0/image/upload/v1695906400/utpg0w4bhenetupbxto4.jpg"}}]);