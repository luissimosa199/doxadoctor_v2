"use strict";
(() => {
var exports = {};
exports.id = 7043;
exports.ids = [7043];
exports.modules = {

/***/ 2578:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   config: () => (/* binding */ config),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   getServerSideProps: () => (/* binding */ getServerSideProps),
/* harmony export */   getStaticPaths: () => (/* binding */ getStaticPaths),
/* harmony export */   getStaticProps: () => (/* binding */ getStaticProps),
/* harmony export */   reportWebVitals: () => (/* binding */ reportWebVitals),
/* harmony export */   routeModule: () => (/* binding */ routeModule),
/* harmony export */   unstable_getServerProps: () => (/* binding */ unstable_getServerProps),
/* harmony export */   unstable_getServerSideProps: () => (/* binding */ unstable_getServerSideProps),
/* harmony export */   unstable_getStaticParams: () => (/* binding */ unstable_getStaticParams),
/* harmony export */   unstable_getStaticPaths: () => (/* binding */ unstable_getStaticPaths),
/* harmony export */   unstable_getStaticProps: () => (/* binding */ unstable_getStaticProps)
/* harmony export */ });
/* harmony import */ var next_dist_server_future_route_modules_pages_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3185);
/* harmony import */ var next_dist_server_future_route_modules_pages_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7182);
/* harmony import */ var private_next_pages_document_tsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3104);
/* harmony import */ var private_next_pages_app_tsx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(9212);
/* harmony import */ var private_next_pages_oldindex_tsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(885);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([private_next_pages_app_tsx__WEBPACK_IMPORTED_MODULE_3__, private_next_pages_oldindex_tsx__WEBPACK_IMPORTED_MODULE_4__]);
([private_next_pages_app_tsx__WEBPACK_IMPORTED_MODULE_3__, private_next_pages_oldindex_tsx__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);

        // Next.js Route Loader
        
        

        // Import the app and document modules.
        
        

        // Import the userland code.
        

        // Re-export the component (should be the default export).
        /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_1__/* .hoist */ .l)(private_next_pages_oldindex_tsx__WEBPACK_IMPORTED_MODULE_4__, "default"));

        // Re-export methods.
        const getStaticProps = (0,next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_1__/* .hoist */ .l)(private_next_pages_oldindex_tsx__WEBPACK_IMPORTED_MODULE_4__, "getStaticProps")
        const getStaticPaths = (0,next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_1__/* .hoist */ .l)(private_next_pages_oldindex_tsx__WEBPACK_IMPORTED_MODULE_4__, "getStaticPaths")
        const getServerSideProps = (0,next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_1__/* .hoist */ .l)(private_next_pages_oldindex_tsx__WEBPACK_IMPORTED_MODULE_4__, "getServerSideProps")
        const config = (0,next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_1__/* .hoist */ .l)(private_next_pages_oldindex_tsx__WEBPACK_IMPORTED_MODULE_4__, "config")
        const reportWebVitals = (0,next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_1__/* .hoist */ .l)(private_next_pages_oldindex_tsx__WEBPACK_IMPORTED_MODULE_4__, "reportWebVitals")
        

        // Re-export legacy methods.
        const unstable_getStaticProps = (0,next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_1__/* .hoist */ .l)(private_next_pages_oldindex_tsx__WEBPACK_IMPORTED_MODULE_4__, "unstable_getStaticProps")
        const unstable_getStaticPaths = (0,next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_1__/* .hoist */ .l)(private_next_pages_oldindex_tsx__WEBPACK_IMPORTED_MODULE_4__, "unstable_getStaticPaths")
        const unstable_getStaticParams = (0,next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_1__/* .hoist */ .l)(private_next_pages_oldindex_tsx__WEBPACK_IMPORTED_MODULE_4__, "unstable_getStaticParams")
        const unstable_getServerProps = (0,next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_1__/* .hoist */ .l)(private_next_pages_oldindex_tsx__WEBPACK_IMPORTED_MODULE_4__, "unstable_getServerProps")
        const unstable_getServerSideProps = (0,next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_1__/* .hoist */ .l)(private_next_pages_oldindex_tsx__WEBPACK_IMPORTED_MODULE_4__, "unstable_getServerSideProps")

        // Create and export the route module that will be consumed.
        const options = {"definition":{"kind":"PAGES","page":"/oldindex","pathname":"/oldindex","bundlePath":"","filename":""}}
        const routeModule = new (next_dist_server_future_route_modules_pages_module__WEBPACK_IMPORTED_MODULE_0___default())({
          ...options,
          components: {
            App: private_next_pages_app_tsx__WEBPACK_IMPORTED_MODULE_3__["default"],
            Document: private_next_pages_document_tsx__WEBPACK_IMPORTED_MODULE_2__["default"],
          },
          userland: private_next_pages_oldindex_tsx__WEBPACK_IMPORTED_MODULE_4__,
        })
        
        
    
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 5650:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5893);
/* harmony import */ var _utils_getCategories__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(4154);
/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1664);
/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(6689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _tanstack_react_query__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(9752);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_tanstack_react_query__WEBPACK_IMPORTED_MODULE_3__]);
_tanstack_react_query__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];





const CategoriesList = ()=>{
    const visibleItems = 20;
    const [showAll, setShowAll] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);
    const { data, isLoading, error } = (0,_tanstack_react_query__WEBPACK_IMPORTED_MODULE_3__.useQuery)([
        "categories"
    ], ()=>{
        return (0,_utils_getCategories__WEBPACK_IMPORTED_MODULE_4__/* .fetchCategories */ .p)();
    });
    if (isLoading) {
        return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
            className: "",
            children: [
                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("h2", {
                    className: "text-3xl mb-4",
                    children: "Categor\xedas"
                }),
                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("ul", {
                    className: "mb-8 flex flex-col gap-1",
                    children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("li", {
                        children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("p", {
                            children: "Cargando..."
                        })
                    })
                })
            ]
        });
    }
    if (error || data instanceof Error) {
        return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
            className: "",
            children: [
                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("h2", {
                    className: "text-3xl mb-4",
                    children: "Categor\xedas"
                }),
                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("ul", {
                    className: "mb-8 flex flex-col gap-1",
                    children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("li", {
                        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p", {
                            children: [
                                "Error ",
                                JSON.stringify(error)
                            ]
                        })
                    })
                })
            ]
        });
    }
    return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
        className: "p-2",
        children: data?.length === 0 ? /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("p", {
            className: "text-sm",
            children: "No hay categor\xedas para mostrar"
        }) : /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
            children: [
                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("h2", {
                    className: "text-2xl mb-1",
                    children: "Categor\xedas"
                }),
                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("ul", {
                    className: "mb-2 flex flex-wrap justify-center gap-1 px-1 overflow-hidden transition-all duration-500",
                    style: {
                        height: !showAll ? "auto" : `${visibleItems * 0.3}rem`
                    },
                    children: data.map((e, idx)=>{
                        const displayValue = typeof e === "string" ? e : e.value;
                        return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("li", {
                            className: `transition-all duration-500 ${idx >= visibleItems && !showAll ? "opacity-0 scale-0" : "opacity-100 scale-100"}`,
                            children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx((next_link__WEBPACK_IMPORTED_MODULE_1___default()), {
                                className: "text-gray-500 text-xs font-medium tracking-wider text-left uppercase py-0.5 px-1 hover:underline hover:text-gray-600",
                                href: `/nota/search?tags=${displayValue}`,
                                children: displayValue
                            })
                        }, idx);
                    })
                }),
                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("button", {
                    onClick: ()=>setShowAll(!showAll),
                    className: "focus:outline-none text-gray-500 hover:text-gray-600 p-1",
                    children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("svg", {
                        className: `w-4 h-4 transform transition-transform duration-300 ${showAll ? "rotate-180" : ""}`,
                        fill: "none",
                        stroke: "currentColor",
                        viewBox: "0 0 24 24",
                        xmlns: "http://www.w3.org/2000/svg",
                        children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("path", {
                            strokeLinecap: "round",
                            strokeLinejoin: "round",
                            strokeWidth: 2,
                            d: "M19 9l-7 7-7-7"
                        })
                    })
                })
            ]
        })
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CategoriesList);

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 5186:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5893);
/* harmony import */ var _utils_getCategories__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(4154);
/* harmony import */ var _utils_isYtUrl__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(455);
/* harmony import */ var _fortawesome_free_brands_svg_icons__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(303);
/* harmony import */ var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(4563);
/* harmony import */ var _fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(7197);
/* harmony import */ var _fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(6689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_fortawesome_free_brands_svg_icons__WEBPACK_IMPORTED_MODULE_1__, _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_2__]);
([_fortawesome_free_brands_svg_icons__WEBPACK_IMPORTED_MODULE_1__, _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);







const tailwindNamedColors = (/* unused pure expression or super */ null && ([
    "black",
    "white",
    "rose",
    "pink",
    "fuchsia",
    "purple",
    "violet",
    "indigo",
    "blue",
    "lightBlue",
    "cyan",
    "teal",
    "emerald",
    "green",
    "lime",
    "yellow",
    "amber",
    "orange",
    "red",
    "warmGray",
    "trueGray",
    "gray",
    "coolGray",
    "blueGray"
]));
const InputList = ({ inputList, setInputList, placeholder, type, showState, primaryColor = "yellow", modelType })=>{
    const [inputText, setInputText] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)("");
    const inputRef = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null);
    const [suggestions, setSuggestions] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)([]);
    const [highlightedIndex, setHighlightedIndex] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(null);
    (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(()=>{
        if (type === "tag") {
            (async ()=>{
                let response;
                if (modelType) {
                    response = await (0,_utils_getCategories__WEBPACK_IMPORTED_MODULE_5__/* .fetchCategories */ .p)(modelType);
                } else {
                    response = await (0,_utils_getCategories__WEBPACK_IMPORTED_MODULE_5__/* .fetchCategories */ .p)();
                }
                setSuggestions(response);
            })();
        }
    }, [
        type,
        modelType
    ]);
    const handleCaptionChange = (idx, caption)=>{
        if (type === "link") {
            const newList = [
                ...inputList
            ];
            newList[idx] = {
                ...newList[idx],
                caption: caption
            };
            setInputList(newList);
        }
    };
    const handleInputChange = (event)=>{
        setInputText(event.target.value);
        setHighlightedIndex(null);
    };
    const handleKeyPress = (event)=>{
        const filteredSuggestions = suggestions.filter((e)=>e.startsWith(inputText));
        if (event.key === "Enter") {
            event.preventDefault(); // Prevent any default form action
            if (highlightedIndex !== null && highlightedIndex < filteredSuggestions.length) {
                addInput(filteredSuggestions[highlightedIndex]);
            } else {
                addInput();
            }
        } else if (event.key === "ArrowDown") {
            event.preventDefault(); // Prevent default scroll behavior
            setHighlightedIndex((prevIndex)=>prevIndex === null || prevIndex >= filteredSuggestions.length - 1 ? 0 : prevIndex + 1);
        } else if (event.key === "ArrowUp") {
            event.preventDefault();
            setHighlightedIndex((prevIndex)=>prevIndex === null || prevIndex <= 0 ? filteredSuggestions.length - 1 : prevIndex - 1);
        }
    };
    const addInput = (valueToAdd)=>{
        const trimmedValue = (valueToAdd || inputText).trim();
        const inputValue = type === "tag" ? trimmedValue.toLocaleLowerCase() : trimmedValue;
        if (type === "tag") {
            if (inputList.includes(inputValue)) {
                setInputText("");
                return;
            }
            if (inputValue !== "") {
                setInputList((prevInputs)=>[
                        ...prevInputs,
                        inputValue
                    ]);
                setInputText("");
            }
        } else if (type === "link") {
            if (inputList.some((item)=>item.value === inputValue)) {
                setInputText("");
                return;
            }
            if (inputValue !== "") {
                setInputList((prevInputs)=>[
                        ...prevInputs,
                        {
                            value: inputValue
                        }
                    ]);
                setInputText("");
            }
            if (inputRef.current) {
                inputRef.current.focus();
            }
        }
    };
    const renderTagItems = ()=>inputList.map((item, idx)=>/*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("li", {
                className: "bg-black rounded-md p-2 mb-2 w-full md:w-[30%] relative",
                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                    className: "flex justify-between items-center",
                    children: [
                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("span", {
                            className: "text-[#f90] font-medium",
                            children: item
                        }),
                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("button", {
                            className: "text-xs bg-red-500 font-bold w-5 h-5 rounded-full text-white absolute top-2 right-2 flex justify-center items-center",
                            onClick: (event)=>{
                                event.preventDefault();
                                if (type === "tag") {
                                    setInputList((prevList)=>prevList.filter((input)=>input !== item));
                                } else {
                                    setInputList((prevList)=>prevList.filter((input)=>input.value !== item.value));
                                }
                            },
                            children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_3__.FontAwesomeIcon, {
                                icon: _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_2__.faX
                            })
                        })
                    ]
                })
            }, idx));
    const renderLinkItems = ()=>inputList.map((item, idx)=>{
            const { value, caption } = item;
            return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("li", {
                className: "bg-white border rounded-md p-2 mb-2 w-full relative",
                children: [
                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                        className: "flex justify-between items-start",
                        children: [
                            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                                children: [
                                    (0,_utils_isYtUrl__WEBPACK_IMPORTED_MODULE_6__/* .isYtUrl */ .T)(value) ? /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_3__.FontAwesomeIcon, {
                                        icon: _fortawesome_free_brands_svg_icons__WEBPACK_IMPORTED_MODULE_1__.faYoutube,
                                        color: "red"
                                    }) : /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_3__.FontAwesomeIcon, {
                                        icon: _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_2__.faLink
                                    }),
                                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("span", {
                                        className: `text-${(0,_utils_isYtUrl__WEBPACK_IMPORTED_MODULE_6__/* .isYtUrl */ .T)(value) ? "red" : "blue"}-600 font-medium ml-2`,
                                        children: value
                                    })
                                ]
                            }),
                            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("button", {
                                className: "text-xs bg-red-500 font-bold w-5 h-5 rounded-full text-white absolute top-2 right-2",
                                onClick: (event)=>{
                                    event.preventDefault();
                                    if (type === "link") {
                                        setInputList((prevList)=>prevList.filter((input)=>input.value !== item.value));
                                    }
                                },
                                children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_3__.FontAwesomeIcon, {
                                    icon: _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_2__.faX
                                })
                            })
                        ]
                    }),
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("input", {
                        type: "text",
                        value: item.caption || "",
                        onChange: (e)=>handleCaptionChange(idx, e.target.value),
                        placeholder: "Agrega un comentario",
                        className: "mt-2 border rounded px-2 py-1 w-full placeholder:text-sm"
                    })
                ]
            }, idx);
        });
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
        className: "flex flex-col gap-2 relative",
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                className: "relative",
                children: [
                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                        className: "relative z-10",
                        children: [
                            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("input", {
                                ref: inputRef,
                                type: "text",
                                value: inputText,
                                onChange: handleInputChange,
                                onKeyDown: handleKeyPress,
                                placeholder: placeholder,
                                className: "border rounded px-3 py-2 w-full mb-2",
                                autoCapitalize: "none",
                                autoCorrect: "off",
                                autoComplete: "off"
                            }),
                            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("button", {
                                onClick: (event)=>{
                                    event.preventDefault();
                                    addInput();
                                    if (inputRef.current) inputRef.current.focus();
                                },
                                className: `absolute right-2 top-2 text-lg font-bold rounded-full shadow w-6 h-6 leading-4 text-${primaryColor}-500 border border-${primaryColor}-500 bg-white hover:bg-${primaryColor}-200 hover:text-${primaryColor}-700`,
                                children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_3__.FontAwesomeIcon, {
                                    icon: _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_2__.faGreaterThan
                                })
                            })
                        ]
                    }),
                    type === "tag" && suggestions.length > 0 && inputText.length > 0 && /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("ul", {
                        className: "absolute bg-white border rounded-md w-full max-h-[200px] overflow-y-auto mt-2 z-50",
                        children: suggestions.filter((e)=>e.startsWith(inputText)).map((suggestion, idx)=>/*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("li", {
                                className: `cursor-pointer px-3 py-2 shadow-md ${highlightedIndex === idx ? "bg-gray-200" : ""} hover:bg-gray-200`,
                                onClick: ()=>{
                                    addInput(suggestion);
                                },
                                children: suggestion
                            }, idx))
                    })
                ]
            }),
            showState && /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("ul", {
                className: "flex flex-wrap gap-2 md:justify-between",
                children: type === "tag" ? renderTagItems() : renderLinkItems()
            })
        ]
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (InputList);

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 4759:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5893);
/* harmony import */ var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(4563);
/* harmony import */ var _fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(7197);
/* harmony import */ var _fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1649);
/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(6689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _FlexInputList__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(5186);
/* harmony import */ var react_hook_form__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(5641);
/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(5675);
/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_image__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _utils_formHelpers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(6939);
/* harmony import */ var _hooks_useOptimisticUpdate__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(5419);
/* harmony import */ var _tanstack_react_query__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(9752);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_1__, _FlexInputList__WEBPACK_IMPORTED_MODULE_5__, react_hook_form__WEBPACK_IMPORTED_MODULE_6__, _utils_formHelpers__WEBPACK_IMPORTED_MODULE_8__, _hooks_useOptimisticUpdate__WEBPACK_IMPORTED_MODULE_9__, _tanstack_react_query__WEBPACK_IMPORTED_MODULE_10__]);
([_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_1__, _FlexInputList__WEBPACK_IMPORTED_MODULE_5__, react_hook_form__WEBPACK_IMPORTED_MODULE_6__, _utils_formHelpers__WEBPACK_IMPORTED_MODULE_8__, _hooks_useOptimisticUpdate__WEBPACK_IMPORTED_MODULE_9__, _tanstack_react_query__WEBPACK_IMPORTED_MODULE_10__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);











const PrimaryForm = ()=>{
    const [tagInputVisibility, setTagInputVisibility] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(false);
    const [tagsList, setTagsList] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)([]);
    const [linkInputVisibility, setLinkInputVisibility] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(false);
    const [linksList, setLinksList] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)([]);
    const [photoInputVisibility, setPhotoInputVisibility] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(false);
    const [openModule, setOpenModule] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(false);
    const [submitBtnDisabled, setSubmitBtnDisabled] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(false);
    const [imageUploadPromise, setImageUploadPromise] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(null);
    const [images, setImages] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)([]);
    const [previews, setPreviews] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)([]);
    const [imagesCaption, setImagesCaptions] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)([]);
    const { data: session } = (0,next_auth_react__WEBPACK_IMPORTED_MODULE_3__.useSession)();
    const { register, handleSubmit, reset } = (0,react_hook_form__WEBPACK_IMPORTED_MODULE_6__.useForm)();
    const queryClient = (0,_tanstack_react_query__WEBPACK_IMPORTED_MODULE_10__.useQueryClient)();
    const optimisticUpdate = (0,_hooks_useOptimisticUpdate__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(imagesCaption, tagsList, session);
    const mutation = (0,_tanstack_react_query__WEBPACK_IMPORTED_MODULE_10__.useMutation)(async ({ data, urls })=>{
        const payload = {
            ...data,
            photo: urls.map((url, photoIdx)=>{
                const caption = imagesCaption.find((e)=>e.idx === photoIdx)?.value;
                return {
                    url: url,
                    idx: photoIdx,
                    caption: caption
                };
            })
        };
        return (0,_utils_formHelpers__WEBPACK_IMPORTED_MODULE_8__/* .sendData */ .$S)(payload);
    }, {
        onSuccess: async (data)=>{
            const currentData = queryClient.getQueryData([
                "timelines"
            ]) || {
                pages: [],
                pageParams: []
            };
            const response = await data.json();
            const newPayload = {
                ...response,
                photo: previews.map((image, photoIdx)=>{
                    const caption = imagesCaption.find((e)=>e.idx === photoIdx)?.value;
                    return {
                        url: image,
                        idx: photoIdx,
                        caption: caption
                    };
                })
            };
            if (currentData.pages.length) {
                queryClient.setQueryData([
                    "timelines"
                ], {
                    ...currentData,
                    pages: [
                        [
                            newPayload,
                            ...currentData.pages[0].slice(1)
                        ],
                        ...currentData.pages.slice(1)
                    ],
                    pageParams: currentData.pageParams
                });
            }
            setPreviews([]);
        },
        onMutate (data) {
            const newPayload = {
                ...data.data,
                _id: "newTimeline",
                createdAt: new Date().toDateString(),
                photo: previews.map((image, photoIdx)=>{
                    const caption = imagesCaption.find((e)=>e.idx === photoIdx)?.value;
                    return {
                        url: image,
                        idx: photoIdx,
                        caption: caption
                    };
                })
            };
            const userTimelines = queryClient.getQueryData([
                session?.user?.email,
                "userTimelines"
            ]) || [];
            queryClient.setQueryData([
                session?.user?.email,
                "userTimelines"
            ], [
                newPayload,
                ...userTimelines
            ]);
        }
    });
    const moduleOpen = ()=>{
        return tagInputVisibility;
    };
    const toggleOpenModule = (name)=>{
        if (name === "tags") {
            if (tagInputVisibility) {
                setTagInputVisibility(false);
                setOpenModule(false);
                return;
            }
            setPhotoInputVisibility(false);
            setTagInputVisibility(true);
            setLinkInputVisibility(false);
            setOpenModule(true);
        } else if (name === "links") {
            if (linkInputVisibility) {
                setLinkInputVisibility(false);
                setOpenModule(false);
                return;
            }
            setPhotoInputVisibility(false);
            setLinkInputVisibility(true);
            setTagInputVisibility(false);
            setOpenModule(true);
        } else if (name === "photo") {
            if (photoInputVisibility && images.length === 0) {
                setPhotoInputVisibility(false);
                setOpenModule(false);
                return;
            }
            setPhotoInputVisibility(true);
            setLinkInputVisibility(false);
            setTagInputVisibility(false);
            setOpenModule(true);
        }
    };
    const resetAll = ()=>{
        setTagsList([]);
        setLinksList([]);
        setImages([]);
        reset();
        setTagInputVisibility(false);
        setLinkInputVisibility(false);
        setPhotoInputVisibility(false);
        setOpenModule(false);
        setImageUploadPromise(null);
        setSubmitBtnDisabled(false);
    };
    const handleUploadImages = async (event)=>{
        setSubmitBtnDisabled(true);
        const newPreviews = await (0,_utils_formHelpers__WEBPACK_IMPORTED_MODULE_8__/* .handleFileChange */ .Od)(event);
        setPreviews((prevPreviews)=>[
                ...prevPreviews,
                ...newPreviews
            ]);
        try {
            const uploadedUrls = await (0,_utils_formHelpers__WEBPACK_IMPORTED_MODULE_8__/* .uploadImages */ .eg)(event);
            // If you want to set the URLs to some state
            setImages((prevImages)=>[
                    ...prevImages,
                    ...uploadedUrls
                ]);
            setImagesCaptions((prevCaptions)=>[
                    ...prevCaptions,
                    ...new Array(newPreviews.length).fill(0).map((_, index)=>({
                            idx: prevCaptions.length + index,
                            value: ""
                        }))
                ]);
        } catch (error) {
            console.error("Error uploading images:", error);
        }
        setSubmitBtnDisabled(false);
        event.target.value = "";
    };
    const inputFileRef = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null);
    const handleInputActivation = (e)=>{
        e.preventDefault();
        inputFileRef?.current?.click();
        toggleOpenModule("photo");
    };
    const onSubmit = async (data)=>{
        if (data.mainText === "" && data.photo?.length === 0 && linksList.length === 0) {
            return;
        }
        setSubmitBtnDisabled(true);
        const previewPhotos = (0,_utils_formHelpers__WEBPACK_IMPORTED_MODULE_8__/* .createPhotoData */ .J8)(images, imagesCaption);
        const previewData = (0,_utils_formHelpers__WEBPACK_IMPORTED_MODULE_8__/* .createDataObject */ .X4)(data, previewPhotos, tagsList, session, linksList);
        const { previousData } = optimisticUpdate({
            data: previewData,
            images: images
        });
        let urls = [];
        if (imageUploadPromise) {
            urls = await imageUploadPromise;
            setImages([
                ...images,
                ...urls
            ]);
            setImageUploadPromise(null);
        }
        const currentPhotos = (0,_utils_formHelpers__WEBPACK_IMPORTED_MODULE_8__/* .createPhotoData */ .J8)(urls, imagesCaption);
        const processedData = (0,_utils_formHelpers__WEBPACK_IMPORTED_MODULE_8__/* .createDataObject */ .X4)(data, currentPhotos, tagsList, session, linksList);
        try {
            await mutation.mutateAsync({
                data: processedData,
                urls: images
            });
        } catch (err) {
            if (previousData) {
                queryClient.setQueryData([
                    "timelines"
                ], previousData);
            }
            throw err;
        }
        resetAll();
    };
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("form", {
        onSubmit: handleSubmit(onSubmit),
        className: "mt-12 border-2  border-[#3a3a3a] flex flex-col min-h-48 my-4 rounded-md max-w-[850px] mx-auto",
        children: [
            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                className: "h-2/3 flex",
                children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("textarea", {
                    ...register("mainText"),
                    placeholder: "Escribe algo ac\xe1",
                    className: "w-full p-2 bg-[#9a9a9a] text-gray-900 text-lg placeholder:text-lg placeholder:text-white"
                })
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                className: `p-4 bg-[#3a3a3a] ${moduleOpen() ? "min-h-48" : "h-1/3"}`,
                children: [
                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                        className: " flex gap-4",
                        children: [
                            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                                children: [
                                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("button", {
                                        className: "h-8",
                                        onClick: handleInputActivation,
                                        children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_2__.FontAwesomeIcon, {
                                            className: "h-full text-[#f90] cursor-pointer active:opacity-75 lg:hover:opacity-75 transition-all",
                                            icon: _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_1__.faCamera
                                        })
                                    }),
                                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("input", {
                                        accept: "image/png, image/jpeg, video/mp4",
                                        className: "absolute opacity-0 w-0 h-0 hidden",
                                        type: "file",
                                        id: "photo",
                                        multiple: true,
                                        ...register ? register("photo") : {},
                                        ref: inputFileRef,
                                        onChange: handleUploadImages
                                    })
                                ]
                            }),
                            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("button", {
                                    className: "h-8 ",
                                    onClick: (e)=>{
                                        e.preventDefault();
                                        toggleOpenModule("tags");
                                    },
                                    children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_2__.FontAwesomeIcon, {
                                        className: `h-full text-[#f90] cursor-pointer active:opacity-75 lg:hover:opacity-75 transition-all ${tagInputVisibility ? "text-[#995c00]" : "text-[#f90]"} `,
                                        icon: _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_1__.faTag
                                    })
                                })
                            }),
                            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("button", {
                                    className: "h-8 ",
                                    onClick: (e)=>{
                                        e.preventDefault();
                                        toggleOpenModule("links");
                                    },
                                    children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_2__.FontAwesomeIcon, {
                                        className: "h-full text-[#f90] cursor-pointer active:opacity-75 lg:hover:opacity-75 transition-all",
                                        icon: _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_1__.faLink
                                    })
                                })
                            }),
                            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                className: "ml-auto mr-4",
                                children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("button", {
                                    className: "h-8 ",
                                    disabled: submitBtnDisabled,
                                    type: "submit",
                                    children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_2__.FontAwesomeIcon, {
                                        className: "h-full text-[#f90] cursor-pointer active:opacity-75 lg:hover:opacity-75 transition-all",
                                        icon: _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_1__.faPaperPlane
                                    })
                                })
                            })
                        ]
                    }),
                    openModule && /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                        className: `min-h-24 mt-2`,
                        children: [
                            linkInputVisibility && /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_FlexInputList__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
                                inputList: linksList,
                                setInputList: setLinksList,
                                placeholder: "Agrega un link y presiona Enter",
                                type: "link",
                                showState: true
                            }),
                            tagInputVisibility && /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_FlexInputList__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
                                inputList: tagsList,
                                setInputList: setTagsList,
                                placeholder: "Agrega una categor\xeda y presiona Enter",
                                type: "tag",
                                showState: true
                            }),
                            photoInputVisibility && previews.length > 0 && /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                className: "flex flex-col gap-2",
                                children: previews.map((e, idx)=>{
                                    const isVideo = e.includes("data:video/mp4");
                                    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                                        children: [
                                            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("button", {
                                                className: "text-xs text-red-500 mb-1",
                                                onClick: (event)=>(0,_utils_formHelpers__WEBPACK_IMPORTED_MODULE_8__/* .handleDeleteImage */ .BI)(event, idx, setImages, setPreviews),
                                                children: "Borrar"
                                            }),
                                            isVideo ? /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("video", {
                                                controls: true,
                                                width: "834",
                                                height: "834",
                                                className: "mt-2 rounded shadow-md",
                                                children: [
                                                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("source", {
                                                        src: e,
                                                        type: "video/mp4"
                                                    }),
                                                    "Your browser does not support the video tag."
                                                ]
                                            }) : /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx((next_image__WEBPACK_IMPORTED_MODULE_7___default()), {
                                                src: e,
                                                alt: `Thumbnail ${idx}`,
                                                className: "mt-2 rounded shadow-md",
                                                width: 834,
                                                height: 834
                                            }),
                                            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("input", {
                                                className: "border w-full mb-1 p-2 placeholder:text-sm rounded-md",
                                                placeholder: "Agrega un texto a esta foto",
                                                type: "text",
                                                onChange: (event)=>(0,_utils_formHelpers__WEBPACK_IMPORTED_MODULE_8__/* .handleCaptionChange */ .tr)(event, idx, imagesCaption, setImagesCaptions)
                                            })
                                        ]
                                    }, idx);
                                })
                            })
                        ]
                    })
                ]
            })
        ]
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PrimaryForm);

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 5419:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _tanstack_react_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9752);
/* harmony import */ var _utils_formHelpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6939);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_tanstack_react_query__WEBPACK_IMPORTED_MODULE_0__, _utils_formHelpers__WEBPACK_IMPORTED_MODULE_1__]);
([_tanstack_react_query__WEBPACK_IMPORTED_MODULE_0__, _utils_formHelpers__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);


const useOptimisticUpdate = (imagesCaption, tagsList, session)=>{
    const queryClient = (0,_tanstack_react_query__WEBPACK_IMPORTED_MODULE_0__.useQueryClient)();
    return ({ data, images })=>{
        queryClient.cancelQueries([
            "timelines"
        ]);
        const currentData = queryClient.getQueryData([
            "timelines"
        ]);
        const currentPhotos = images.map((image, photoIdx)=>{
            const caption = imagesCaption.find((e)=>e.idx === photoIdx)?.value;
            return {
                url: image,
                idx: photoIdx,
                caption: caption
            };
        });
        const newData = {
            _id: "newitem",
            createdAt: (0,_utils_formHelpers__WEBPACK_IMPORTED_MODULE_1__/* .getCurrentDateTimeString */ .J4)(),
            mainText: data.mainText || "",
            photo: currentPhotos,
            length: currentPhotos.length,
            tags: tagsList,
            authorId: session?.user?.email ?? "defaultId",
            authorName: session?.user?.name ?? "defaultName",
            links: data.links
        };
        if (currentData) {
            queryClient.setQueryData([
                "timelines"
            ], {
                ...currentData,
                pages: [
                    [
                        newData,
                        ...currentData.pages[0]
                    ],
                    ...currentData.pages.slice(1)
                ]
            });
        }
        return {
            previousData: currentData
        };
    };
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (useOptimisticUpdate);

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 885:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   getServerSideProps: () => (/* binding */ getServerSideProps)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5893);
/* harmony import */ var _components_TimeLine__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(9825);
/* harmony import */ var _db_dbConnect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(7881);
/* harmony import */ var _db_models__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(6120);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(6689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(3908);
/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(lodash_debounce__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _tanstack_react_query__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(9752);
/* harmony import */ var _utils_getTimelines__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2883);
/* harmony import */ var _components_CategoriesList__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(5650);
/* harmony import */ var _components_PrimaryForm__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(4759);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_components_TimeLine__WEBPACK_IMPORTED_MODULE_1__, _db_models__WEBPACK_IMPORTED_MODULE_3__, _tanstack_react_query__WEBPACK_IMPORTED_MODULE_6__, _components_CategoriesList__WEBPACK_IMPORTED_MODULE_7__, _components_PrimaryForm__WEBPACK_IMPORTED_MODULE_8__]);
([_components_TimeLine__WEBPACK_IMPORTED_MODULE_1__, _db_models__WEBPACK_IMPORTED_MODULE_3__, _tanstack_react_query__WEBPACK_IMPORTED_MODULE_6__, _components_CategoriesList__WEBPACK_IMPORTED_MODULE_7__, _components_PrimaryForm__WEBPACK_IMPORTED_MODULE_8__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);










const Mainboard = ({ timelineData })=>{
    const [searchValue, setSearchValue] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(null);
    const [searchResult, setSearchResult] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(null);
    const { data, isLoading, isError, error, fetchNextPage, hasNextPage, isFetchingNextPage } = (0,_tanstack_react_query__WEBPACK_IMPORTED_MODULE_6__.useInfiniteQuery)([
        "timelines"
    ], ({ pageParam = 0 })=>(0,_utils_getTimelines__WEBPACK_IMPORTED_MODULE_9__/* .getTimelines */ .k)("timelines", pageParam), {
        initialData: {
            pages: [
                timelineData
            ],
            pageParams: [
                null
            ]
        },
        getNextPageParam: (lastPage, allPages)=>{
            if (lastPage.length === 0) return undefined;
            return allPages.length;
        }
    });
    const debouncedHandleSearchBar = lodash_debounce__WEBPACK_IMPORTED_MODULE_5___default()((value)=>{
        setSearchValue(value);
    }, 300);
    const handleSearchBar = (event)=>{
        event.preventDefault();
        debouncedHandleSearchBar(event.target.value);
    };
    const handleSearch = async (value)=>{
        const url = new URL("/api/timeline", window.location.origin);
        const valuesArray = value.split(" ");
        if (valuesArray.length > 1) {
            valuesArray.map((e)=>url.searchParams.append("tags", e));
        } else {
            url.searchParams.append("tags", value);
        }
        const response = await fetch(url, {
            method: "GET"
        });
        if (response.ok) {
            const data = await response.json();
            return data;
        } else {
            throw new Error("Failed to fetch data");
        }
    };
    (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(()=>{
        (async ()=>{
            if (searchValue) {
                try {
                    const response = await handleSearch(searchValue);
                    setSearchResult(response);
                } catch (error) {
                    console.error(error);
                }
            }
        })();
    }, [
        searchValue
    ]);
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                className: "text-center max-w-[850px] mx-auto flex flex-col mb-4",
                children: [
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("input", {
                        placeholder: "Buscar por categor\xeda",
                        className: "border rounded p-2 mb-4",
                        type: "text",
                        onChange: handleSearchBar
                    }),
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_components_CategoriesList__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {})
                ]
            }),
            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_components_PrimaryForm__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {}),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                className: "mt-4 min-h-screen",
                children: [
                    isError && /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p", {
                        children: [
                            "Error: ",
                            JSON.stringify(error),
                            " "
                        ]
                    }),
                    searchValue && Array.isArray(searchResult) && searchResult.length > 0 ? searchResult.map((e)=>/*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                            children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_components_TimeLine__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z, {
                                _id: e._id,
                                tags: Array.isArray(e.tags) ? e.tags : [
                                    e.tags
                                ],
                                mainText: e.mainText,
                                length: e.length,
                                timeline: e.photo,
                                createdAt: e.createdAt,
                                authorId: e.authorId,
                                authorName: e.authorName,
                                links: e.links,
                                urlSlug: e.urlSlug
                            })
                        }, e._id)) : searchValue && Array.isArray(searchResult) && searchResult.length === 0 ? /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("p", {
                        className: "text-center text-lg font-bold mt-4",
                        children: "No hay resultados"
                    }) : /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
                        children: [
                            data?.pages.map((page)=>page.map((e)=>/*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                        children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_components_TimeLine__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z, {
                                            _id: e._id,
                                            tags: Array.isArray(e.tags) ? e.tags : [
                                                e.tags
                                            ],
                                            mainText: e.mainText,
                                            length: e.length,
                                            timeline: e.photo,
                                            createdAt: e.createdAt,
                                            authorId: e.authorId,
                                            authorName: e.authorName,
                                            links: e.links,
                                            urlSlug: e.urlSlug
                                        })
                                    }, e._id))),
                            isLoading && /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("p", {
                                className: "w-full bg-slate-100 py-4 text-center",
                                children: "Cargando..."
                            }),
                            isError && /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p", {
                                children: [
                                    "Error: ",
                                    JSON.stringify(error)
                                ]
                            }),
                            data && isFetchingNextPage && /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("p", {
                                className: "w-full bg-slate-100 py-4 text-center",
                                children: "Cargando..."
                            }),
                            data && hasNextPage && !isFetchingNextPage && /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("button", {
                                onClick: ()=>fetchNextPage(),
                                disabled: isFetchingNextPage,
                                className: "w-full bg-slate-100 py-4 ",
                                children: "Ver m\xe1s"
                            })
                        ]
                    })
                ]
            })
        ]
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Mainboard);
const getServerSideProps = async ()=>{
    const queryClient = new _tanstack_react_query__WEBPACK_IMPORTED_MODULE_6__.QueryClient();
    try {
        await (0,_db_dbConnect__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)();
        const response = await _db_models__WEBPACK_IMPORTED_MODULE_3__/* .TimeLineModel */ .HQ.find({}).sort({
            createdAt: -1
        }).limit(10).lean();
        const timelineData = response.map((item)=>({
                _id: item._id,
                urlSlug: item.urlSlug || "",
                mainText: item.mainText,
                length: item.length,
                photo: item.photo,
                createdAt: item.createdAt.toISOString(),
                tags: item.tags || [],
                authorId: item.authorId || "",
                authorName: item.authorName || "",
                links: item.links
            }));
        queryClient.setQueryData([
            "timelines"
        ], {
            pages: [
                timelineData
            ],
            pageParams: [
                null
            ]
        });
        return {
            props: {
                timelineData,
                dehydratedState: (0,_tanstack_react_query__WEBPACK_IMPORTED_MODULE_6__.dehydrate)(queryClient)
            }
        };
    } catch (error) {
        console.error(error);
        return {
            props: {
                timelineData: [],
                dehydratedState: (0,_tanstack_react_query__WEBPACK_IMPORTED_MODULE_6__.dehydrate)(queryClient)
            }
        };
    }
};

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 4154:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   p: () => (/* binding */ fetchCategories)
/* harmony export */ });
const fetchCategories = async (modelType)=>{
    try {
        const response = await fetch(`/api/getCategories${modelType ? `?modelType=${modelType}` : ""}`, {
            method: "GET"
        });
        if (!response.ok) {
            throw new Error("Failed to fetch categories");
        }
        const data = await response.json();
        return data;
    } catch (error) {
        throw error;
    }
};


/***/ }),

/***/ 2883:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   k: () => (/* binding */ getTimelines)
/* harmony export */ });
const getTimelines = async (key, page = 0)=>{
    const response = await fetch(`/api/timeline?page=${page}`);
    const data = await response.json();
    return data;
};


/***/ }),

/***/ 7197:
/***/ ((module) => {

module.exports = require("@fortawesome/react-fontawesome");

/***/ }),

/***/ 3868:
/***/ ((module) => {

module.exports = require("@typegoose/typegoose");

/***/ }),

/***/ 8982:
/***/ ((module) => {

module.exports = require("cookies-next");

/***/ }),

/***/ 3908:
/***/ ((module) => {

module.exports = require("lodash/debounce");

/***/ }),

/***/ 1185:
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ 1649:
/***/ ((module) => {

module.exports = require("next-auth/react");

/***/ }),

/***/ 7526:
/***/ ((module) => {

module.exports = require("next-cloudinary");

/***/ }),

/***/ 3076:
/***/ ((module) => {

module.exports = require("next/dist/server/future/route-modules/route-module.js");

/***/ }),

/***/ 4140:
/***/ ((module) => {

module.exports = require("next/dist/server/get-page-files.js");

/***/ }),

/***/ 9716:
/***/ ((module) => {

module.exports = require("next/dist/server/htmlescape.js");

/***/ }),

/***/ 3100:
/***/ ((module) => {

module.exports = require("next/dist/server/render.js");

/***/ }),

/***/ 6368:
/***/ ((module) => {

module.exports = require("next/dist/server/utils.js");

/***/ }),

/***/ 3918:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/amp-context.js");

/***/ }),

/***/ 5732:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/amp-mode.js");

/***/ }),

/***/ 3280:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/app-router-context.js");

/***/ }),

/***/ 6724:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/constants.js");

/***/ }),

/***/ 5132:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/get-img-props.js");

/***/ }),

/***/ 2796:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/head-manager-context.js");

/***/ }),

/***/ 8743:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/html-context.js");

/***/ }),

/***/ 744:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/image-config-context.js");

/***/ }),

/***/ 5843:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/image-config.js");

/***/ }),

/***/ 8524:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/is-plain-object.js");

/***/ }),

/***/ 4964:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/router-context.js");

/***/ }),

/***/ 1751:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/router/utils/add-path-prefix.js");

/***/ }),

/***/ 3938:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/router/utils/format-url.js");

/***/ }),

/***/ 1109:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/router/utils/is-local-url.js");

/***/ }),

/***/ 8854:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/router/utils/parse-path.js");

/***/ }),

/***/ 3297:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/router/utils/remove-trailing-slash.js");

/***/ }),

/***/ 7782:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/router/utils/resolve-href.js");

/***/ }),

/***/ 2470:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/side-effect.js");

/***/ }),

/***/ 9232:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/utils.js");

/***/ }),

/***/ 618:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/utils/warn-once.js");

/***/ }),

/***/ 968:
/***/ ((module) => {

module.exports = require("next/head");

/***/ }),

/***/ 1853:
/***/ ((module) => {

module.exports = require("next/router");

/***/ }),

/***/ 6689:
/***/ ((module) => {

module.exports = require("react");

/***/ }),

/***/ 271:
/***/ ((module) => {

module.exports = require("sweetalert2");

/***/ }),

/***/ 752:
/***/ ((module) => {

module.exports = require("tslib");

/***/ }),

/***/ 9621:
/***/ ((module) => {

module.exports = require("ua-parser-js");

/***/ }),

/***/ 303:
/***/ ((module) => {

module.exports = import("@fortawesome/free-brands-svg-icons");;

/***/ }),

/***/ 2765:
/***/ ((module) => {

module.exports = import("@fortawesome/free-regular-svg-icons");;

/***/ }),

/***/ 4563:
/***/ ((module) => {

module.exports = import("@fortawesome/free-solid-svg-icons");;

/***/ }),

/***/ 9752:
/***/ ((module) => {

module.exports = import("@tanstack/react-query");;

/***/ }),

/***/ 5611:
/***/ ((module) => {

module.exports = import("nanoid");;

/***/ }),

/***/ 5641:
/***/ ((module) => {

module.exports = import("react-hook-form");;

/***/ }),

/***/ 6555:
/***/ ((module) => {

module.exports = import("uuid");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, [1743,5535,7881,6939,8536,6120,718,2345,9825], () => (__webpack_exec__(2578)));
module.exports = __webpack_exports__;

})();